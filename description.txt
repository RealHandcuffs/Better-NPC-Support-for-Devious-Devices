​
Better NPC Support for Devious Devices

 

An experimental add-on for Devious Devices that tries to improve support for NPCs.

 

Warning:

This is a beta release. It might not work correctly. It might cause issues with some other mods.

 

Current functionality:

Restore missing effects after NPC is reloaded by the game engine (for example after loading screen).
Restore missing effects after NPC inventory has changed (for example after player giving new equipment to follower).
Prevent NPC from using weapons and spells in combat.
Bound NPC will use bound combat if enabled in Devious Devices settings.

Current Limitations:

Restoring missing effects may take a few seconds. During that time, devices may flicker as they are being refreshed.
Followers may draw their weapon when the player draws their weapon. This mod will try to undo that, but it can take about two seconds.
Sandboxing packages (especially of followers) might cause NPC to use furniture even with bound hands, which will look wrong.
 

Compatibility:

This mod should work correctly with Devious Devices that are added by other mods.
This mod does not replace NPC packages outside of combat, so it should be fully compatible with NPCs that have custom AI like Paradise Halls slaves, Serana, or custom followers.
The drawback is that their custom AI may occasionally break the bound hands animation (if they are bound), for example when sandboxing.
This mod might interfere with bondage furniture mods (DD Contraptions, ZAP). More testing is required.
 

Credits:

Everybody working on Devious Devices (Assets, Integration, Expansion, etc).
Especially Kimy for patiently answering my questions about the inner workings of Devious Devices, allowing me to understand why things are partially working for some NPCs without this mod, but not at all for some other NPCs.
Me for this mod.
 

License:
Released under CC0 license (included in the archive). My hope is that at some point in the future most of the code might end up in Devious Devices, making this mod unnecessary.

 

Changelog:

Spoiler
Version 0.1 Beta 1
Refre​​​​​sh effects on NPC after NPC is (re)loaded by game engine.
Refresh effects on NPC after NPC inventory changed.
Sheathe weapons after bound NPC draws weapon, and try to keep them sheathed.
Prevent usage of weapons/spells when NPC is wearing bondage mittens or is bound.
Allow bound combat if enabled in DD settings and NPC's feet are free.
Try to fix rendered items not being equipped (e.g. compatibility problems with mods like AllGUD).
Try to fix the issue that giving a NPC a device is somtimes not registered by the game engine (often when the player has multiple identical devices in inventory).